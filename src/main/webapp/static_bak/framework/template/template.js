var NS=NS||{};(function(){var c=this,a=Object.prototype,d=a.toString,b=function(){};NS.global=c;NS.apply=function(h,g,m){if(m){NS.apply(h,m)}if(h&&g&&typeof g==="object"){var l,f,e;for(l in g){h[l]=g[l]}}};NS.apply(NS,{USE_NATIVE_JSON:true,userAgent:navigator.userAgent.toLowerCase(),emptyFn:b,applyIf:function(f,e){var g;for(g in e){if(typeof f[g]==="undefined"){f[g]=e[g]}}},merge:function(e){var k=1,l=arguments.length,f=ExtObject.merge,h=Ext.clone,j,n,m,g;for(;k<l;k++){j=arguments[k];for(n in j){m=j[n];if(m&&m.constructor===Object){g=e[n];if(g&&g.constructor===Object){f(g,m)}else{e[n]=h(m)}}else{e[n]=m}}}return e},clone:function(m){if(m===null||m===undefined){return m}var l=d.call(m);if(l==="[object Date]"){return new Date(m.getTime())}var h,f,e,n,g;if(l==="[object Array]"){h=m.length;n=[];while(h--){n[h]=NS.clone(m[h])}}else{if(l==="[object Object]"&&m.constructor===Object){n={};for(g in m){n[g]=NS.clone(m[g])}}}return n||m},isArray:("isArray" in Array)?Array.isArray:function(e){return d.call(e)==="[object Array]"},isDate:function(e){return d.call(e)==="[object Date]"},isObject:(d.call(null)==="[object Object]")?function(e){return e!==null&&e!==undefined&&d.call(e)==="[object Object]"&&e.ownerDocument===undefined}:function(e){return d.call(e)==="[object Object]"},isPrimitive:function(f){var e=typeof f;return e==="string"||e==="number"||e==="boolean"},isFunction:(typeof document!=="undefined"&&typeof document.getElementsByTagName("body")==="function")?function(e){return d.call(e)==="[object Function]"}:function(e){return typeof e==="function"},isNumber:function(e){return typeof e==="number"&&isFinite(e)},isString:function(e){return typeof e==="string"},isBoolean:function(e){return typeof e==="boolean"},isElement:function(e){return e?e.nodeType===1:false},isTextNode:function(e){return e?e.nodeName==="#text":false},isDefined:function(e){return typeof e!=="undefined"},isEmpty:function(e,f){return(e===null)||(e===undefined)||(!f?e==="":false)||(NS.isArray(e)&&e.length===0)},isLibObj:function(e){return NS.isExtObj(e)},isExtObj:function(e){return e instanceof Ext.Base},isNSObj:function(e){return e instanceof NS.Base},isNSComponent:function(e){return e instanceof NS.Component},isNSElement:function(e){return e instanceof NS.dom.Element}})})();(function(){var r=function(w){return w.test(NS.userAgent)},e=function(y,x){var w;return(y&&(w=x.exec(NS.userAgent)))?parseFloat(w[1]):0},i=document.documentMode,c=r(/\bchrome\b/),v=r(/opera/),q=r(/webkit/),k=!q&&r(/gecko/),b=k&&r(/rv:1\.9/),p=!v&&r(/msie/),n=p&&((r(/msie 7/)&&i!=8&&i!=9)||i==7),m=p&&((r(/msie 8/)&&i!=7&&i!=9)||i==8),l=p&&((r(/msie 9/)&&i!=7&&i!=8)||i==9),a=b&&r(/rv:1\.9\.0/),u=b&&r(/rv:1\.9\.1/),s=b&&r(/rv:1\.9\.2/),j=r(/linux/),t=r(/windows|win32/),h=r(/macintosh|mac os x/),g=e(true,/\bchrome\/(\d+\.\d+)/),d=e(true,/\bfirefox\/(\d+\.\d+)/),f=e(p,/msie (\d+\.\d+)/);NS.apply(NS,{isIE:p,isIE7:n,isIE8:m,isIE9:l,isFF3_0:a,isFF3_5:u,isFF3_6:s,isFF4:4<=d&&d<5,isFF5:5<=d&&d<6,isChrome:c,isLinux:j,isWindows:t,isMac:h,chromeVersion:g,firefoxVersion:d,ieVersion:f});NS.apply(NS,{functionFactory:function(){var w=Array.prototype.slice.call(arguments);return Function.prototype.constructor.apply(Function.prototype,w)},getDom:function(x,w){if(!x||!document){return null}if(x.dom){return x.dom}else{if(typeof x=="string"){var y=NS.getElementById(x);if(y&&p&&w){if(x==y.getAttribute("id")){return y}else{return null}}return y}else{return x}}},get:function(){},getElementById:function(y){var x=document.getElementById(y),w;if(!x&&(w=AbstractElement.detachedBodyEl)&&validIdRe.test(y)){x=w.dom.querySelector("#"+y)}return x}})})();NS.onReady=function(a){NS.ClassLoader.onReady(a)};(function(){NS.id=(function(){var a=1000;return function(){a+=1;return"ns_"+a}})()})();NS.Function={alias:function(b,a){return function(){return b[a].apply(b,arguments)}},bind:function(d,c,b,a){if(arguments.length===2){return function(){return d.apply(c,arguments)}}var f=d,e=Array.prototype.slice;return function(){var g=b||arguments;if(a===true){g=e.call(arguments,0);g=g.concat(b)}else{if(typeof a=="number"){g=e.call(arguments,0);NS.util.Array.insert(g,a,b)}}return f.apply(c||NS.global,g)}},clone:function(a){return function(){return a.apply(this,arguments)}},createBuffered:function(e,b,d,c){var a;return function(){var g=c||Array.prototype.slice.call(arguments,0),f=d||this;if(a){clearTimeout(a)}a=setTimeout(function(){e.apply(f,g)},b)}},createInterceptor:function(d,c,b,a){var e=d;if(!NS.isFunction(c)){return d}else{return function(){var g=this,f=arguments;c.target=g;c.method=d;return(c.apply(b||g||NS.global,f)!==false)?d.apply(g||NS.global,f):a||null}}},createSequence:function(b,c,a){if(!c){return b}else{return function(){var d=b.apply(this,arguments);c.apply(a||this,arguments);return d}}},createThrottled:function(e,b,d){var f,a,c,h,g=function(){e.apply(d||this,c);f=new Date().getTime()};return function(){a=new Date().getTime()-f;c=arguments;clearTimeout(h);if(!f||(a>=b)){g()}else{h=setTimeout(g,b-a)}}},defer:function(e,c,d,b,a){e=NS.Function.bind(e,d,b,a);if(c>0){return setTimeout(e,c)}e();return 0},interceptBefore:function(b,a,d,c){var e=b[a]||NS.emptyFn;return(b[a]=function(){var f=d.apply(c||this,arguments);e.apply(this,arguments);return f})},interceptAfter:function(b,a,d,c){var e=b[a]||NS.emptyFn;return(b[a]=function(){e.apply(this,arguments);return d.apply(c||this,arguments)})}};(function(){var a=NS.Function.alias;NS.bind=a(NS.Function,"bind");NS.defer=a(NS.Function,"defer")})();NS.ClassManager=(function(){var b={};var a=function(c,e){var h,f=0,d="",g=window;h=c.split(".");if(h.length==1){window[c]=e}else{if(!window[h[0]]){window[h[0]]={}}for(f;f<h.length;f++){d=h[f];if(f==h.length-1){g[d]=e}else{if(!g[d]){g[d]={}}g=g[d]}}}};return{register:function(d,c){b[d]=c||{};a(d,c)},unregister:function(c){if(c){delete b[c]}},get:function(c){return b[c]},getClassByNameSpace:function(g){var f,d=0,c,e=window;f=g.split(".");for(d;d<f.length;d++){c=f[d];if(d==f.length-1){return e[c]}e=e[c]}return null},getClass:function(c){return c&&c.self||null},getName:function(c){return c&&c.$classname||""},getSuperInstance:function(d){var c=function(){};c.prototype=d.prototype;return new c()},extend:function(d,c){var e=d.$classname;c.extend=e;subClass=this.createExtendClass(e,c);return subClass},createClass:function(d,c){c.extend=c.extend||"NS.Base";this.createExtendClass(d,c)},createExtendClass:function(m,e){var c,l=e.mixins||[],q=this.get(e.extend),g=this.getSuperInstance(q),d=this.getSuperInstance(q);if(e.hasOwnProperty("constructor")){c=e.constructor;g.constructor=e.constructor;delete e.constructor}else{c=(function(k){var t=function(){k.apply(this,arguments)};return t})(q)}delete e.extend;var p=NS.Function.clone;for(var s in e){var j=g[s];var f=e[s];if(f){if(typeof f==="function"){var n=p(f);n.$owner=c;n.$name=s;g[s]=n}else{if(typeof f==="object"){g[s]=f}else{if(typeof f==="string"){g[s]=f}else{g[s]=f}}}}else{g[s]=j}}NS.applyIf(g,e);g.constructor=c;g.$classname=m;c.prototype=g;this.addProperties(c,{self:c,superclass:d,$classname:m});this.addStatics(c,{superclass:d,$classname:m});for(var h=0;h<l.length;h++){var r=this.get(l[h]);if(r){this.toMix(c,r)}}if(e.singleton===true){var i=new c();this.register(m,i)}else{this.register(m,c)}},addStatics:function(c,d,e){if(e){NS.apply(c,e)}NS.apply(c,d)},addProperties:function(c,d,f){if(f){this.addProperties(c,f)}for(var e in d){c.prototype[e]=d[e]}},toMix:function(d,e){var k=e.prototype,j={},f,g,c,h;for(f in k){switch(f){case"$classname":continue;case"superclass":continue;default:g=k[f];c=g.$owner;if(c){h=c.$classname;if(h!="NS.Base"){j[f]=g}}else{j[f]=g}}}this.addProperties(d,j)},clone:function(c){return function(){return c.apply(this,arguments)}},define:function(d,c){this.createClass(d,c)},namespace:function(d){var c,e=d;this.register(d,{})},create:function(d,c){return new b[d](c)}}})();(function(){var a=NS.ClassManager;var b=NS.Function.alias;a.register("NS",NS);NS.namespace=b(a,"namespace");NS.ns=NS.namespace;NS.define=b(a,"define");NS.create=b(a,"create")})();(function(){var c=NS.Function.alias;var d=function(e){if(e&&e.listeners){var g=e.listeners;if(NS.isObject(g)){for(var f in g){var h=g[f];if(NS.isObject(h[f])){this.addListener(f,h.fn,h.scope||this)}else{if(NS.isFunction(h[f])){this.addListener(f,h[f],this)}}}}}};var b=function(e){d.apply(this,arguments)};var a=NS.ClassManager;a.register("NS.Base",b);NS.apply(b,{$classname:"NS.Base",statics:function(e){},addMember:function(e,f){if(typeof f=="function"&&f!==NS.emptyFn){f.$owner=this}this.prototype[e]=f;return this},addMembers:function(e){if(e){for(var f in e){if(e.hasOwnProperty(f)){this.addMember(f,e[f])}}}}});b.addMembers({$classname:"NS.Base",self:b,callParent:function(e){var f=this.callParent.caller;if(f.caller&&f.caller.$owner){f=f.caller;return f.$owner.superclass[f.$name].apply(this,e||[])}else{if(f.superclass){return f.superclass.constructor.apply(this,e||[])}}},getName:function(){return a.getName(this)},addEvents:function(h){var g=this,f=0,e=g.events=g.events||{};if(typeof h=="string"){for(args=arguments,f=args.length;f--;){arg=args[f];if(!e[arg]){e[arg]={}}}}else{NS.applyIf(g.events,o)}},addListener:function(e,l,h){var k=this,j,g=k.events||{};if(NS.isString(e)){g[e]={};g[e].callback=l;g[e].scope=h}else{if(NS.isObject(e)){for(var f in e){if(g[f]){j=e[f];if(NS.isFunction(j)){g[f].callback=j}else{if(NS.isObject(j)){if(j.fn){g[f].callback=j.fn;g[f].scope=j.scope}}}}}}}},removeListener:function(f){var e=this["events"]||{};if(NS.isString(f)){delete e[f]}},fireEvent:function(k){var m=this,f,l=arguments,p=[],h=0,g,n,e=1;if(typeof k=="string"&&m.events){n=m.events[k]||[]}else{if(typeof k=="object"){for(;e<l.length;e++){p.push(l[e])}}}if(l.length>1){for(;e<l.length;e++){p.push(l[e])}}if(typeof n==="object"){if(n.callback!=undefined){return n.callback.apply(n.scope||m,p)}}}});NS.Base.prototype.on=b.prototype.addListener;NS.Base.prototype.addEvent=b.prototype.addEvents})();NS.Array={insert:function(e,b,d){var a=[];for(var c=0;c<e.length;c++){if(c==b){a.push(e[c],d)}else{a.push(e[c])}}return a},each:function(d,c){for(var b=0;b<d.length;b++){var a=c(d[b],b);if(a==false){break}}},replace:function(e,b,d){var a=new Array();for(var c=0;c<e.length;c++){if(b==c){a.push(d)}else{a.push(e[c])}}return a},contains:function(d,b){for(var a=0;a<d.length;a++){var c=d[a];if(c==b){return true}}return false},clean:function(e){var b=[],a=0,d=e.length,c;for(;a<d;a++){c=e[a];if(!this.isEmpty(c)){b.push(c)}}return b},clone:function(a){return Array.prototype.slice.call(a)},erase:function(e,b,d){var a=new Array();for(var c=0;c<e.length;c++){if(c>=b&&c<(b+d)){}else{a.push(e[c])}}return a},every:function(e,c,b){for(var a=0;a<e.length;a++){var d=c(e[a],a);if(d==b){return true}}return false},forEach:function(f,e,d){for(var c=0,a=f.length;c<a;c++){var b=e(c,f[c],d||this);if(b==false){return}}},indexOf:function(g,e,f){var c,d,a=[];if(typeof f=="undefined"){for(c=0,d=g.length;c<d;c++){if(e==g[c]){return c}}return -1}else{for(c=0,d=g.length;c<d;c++){if(c>=f){a.push(g[c])}}for(var b=0;b<a.length;b++){if(e==a[b]){return b}}return -1}return -1},intersect:function(l,h,c){var g=[];for(var e=0,f=l.length;e<f;e++){for(var d=0,b=h.length;d<b;d++){if(l[e]==h[d]){g.push(l[e])}}}var a={},k=[];for(var e=0,f=g.length;e<f;e++){if(!a[g[e]]){k.push(g[e])}}return k},max:function(c){var a=0;for(var b=0;b<c.length;b++){if(c[b]>c[b+1]){a=c[b];c[b]=c[b+b];c[b+1]=a}}return a},min:function(c){var b=null;for(var a=0;a<c.length;a++){if(c[a]<c[a+1]){b=c[a];c[a]=c[a+1];c[a+1]=c[a]}}return b},mean:function(d){var b=0;var c=d.length;for(var a=0;a<c;a++){b+=d[a]}return parseFloat(b/c)},merge:function(f,e,c){var a=new Array();if(f){for(var d=0;d<f.length;d++){a.push(f[d])}}if(e){for(var b=0;b<e.length;b++){a.push(e[b])}}return a},pluck:function(e,b){var a=[],c,d;for(c=0,d=e.length;c<d;c++){a.push(e[c][b])}return a},remove:function(e,d){var b,c,a=[];for(b=0,c=e.length;b<c;b++){if(d!=e[b]){a.push(e[b])}}return a},slice:function(f,d,b){var c,e,a=[];for(c=0,e=f.length;c<e;c++){if(c>=d&&c<=b){a.push(f[c])}}return a},splice:function(h,c,g,f){var d,e,a=[];var b=0;for(d=0,e=h.length;d<e;d++){if(d>=c&&d<(c+g)){b++;if(typeof f!="object"&&typeof f!="undefined"){if(b==1){a.push(f)}}else{}}else{a.push(h[d])}}return a},sum:function(e){var b=0,a=0,d=e.length,c;for(;a<d;a++){c=e[a];b+=c}return b},union:function(c,b,a){var d=[];if(c instanceof Array&&b instanceof Array){c.concat(b);d=this.unique(c)}return d},unique:function(f){var a=[],b,d,e={};for(b=0,d=f.length;b<d;b++){var c=f[b];if(!e[c]){e[c]=1}else{e[c]+=1}}for(var b in e){if(e[b]==1){a.push(b)}}return a},complexElements:function(g,f,b){var a=[],c,e,h={};for(c=0,e=array.length;c<e;c++){var d=array[c];if(!h[d]){h[d]=1}else{h[d]+=1}}for(var c in h){if(h[c]>1){a.push(c)}}return a},removeAt:function(b,a){b.splice(a,1);return b},toArray:function(c,e,a){if(!c||!c.length){return[]}if(typeof c==="string"){c=c.split("")}if(true){return Array.prototype.slice.call(c,e||0,a||c.length)}var d=[],b;e=e||0;a=a?((a<0)?c.length+a:a):c.length;for(b=e;b<a;b++){d.push(c[b])}return d}};(function(){function b(d){var c=Array.prototype.slice.call(arguments,1);return d.replace(/\{(\d+)\}/g,function(e,f){return c[f]})}NS.Date={now:Date.now||function(){return +new Date()},toString:function(c){var d=Ext.String.leftPad;return c.getFullYear()+"-"+d(c.getMonth()+1,2,"0")+"-"+d(c.getDate(),2,"0")+"T"+d(c.getHours(),2,"0")+":"+d(c.getMinutes(),2,"0")+":"+d(c.getSeconds(),2,"0")},getElapsed:function(d,c){return Math.abs(d-(c||new Date()))},useStrict:false,formatCodeToRegex:function(d,c){var e=a.parseCodes[d];if(e){e=typeof e=="function"?e():e;a.parseCodes[d]=e}return e?Ext.applyIf({c:e.c?b(e.c,c||"{0}"):e.c},e):{g:0,c:null,s:Ext.String.escapeRegex(d)}},parseFunctions:{MS:function(d,c){var e=new RegExp("\\/Date\\(([-+])?(\\d+)(?:[+-]\\d{4})?\\)\\/");var f=(d||"").match(e);return f?new Date(((f[1]||"")+f[2])*1):null}},parseRegexes:[],formatFunctions:{MS:function(){return"\\/Date("+this.getTime()+")\\/"}},y2kYear:50,MILLI:"ms",SECOND:"s",MINUTE:"mi",HOUR:"h",DAY:"d",MONTH:"mo",YEAR:"y",defaults:{},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNumbers:{Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},defaultFormat:"m/d/Y",getShortMonthName:function(c){return Ext.Date.monthNames[c].substring(0,3)},getShortDayName:function(c){return Ext.Date.dayNames[c].substring(0,3)},getMonthNumber:function(c){return Ext.Date.monthNumbers[c.substring(0,1).toUpperCase()+c.substring(1,3).toLowerCase()]},formatContainsHourInfo:(function(){var d=/(\\.)/g,c=/([gGhHisucUOPZ]|MS)/;return function(e){return c.test(e.replace(d,""))}})(),formatContainsDateInfo:(function(){var d=/(\\.)/g,c=/([djzmnYycU]|MS)/;return function(e){return c.test(e.replace(d,""))}})(),formatCodes:{d:"Ext.String.leftPad(this.getDate(), 2, '0')",D:"Ext.Date.getShortDayName(this.getDay())",j:"this.getDate()",l:"Ext.Date.dayNames[this.getDay()]",N:"(this.getDay() ? this.getDay() : 7)",S:"Ext.Date.getSuffix(this)",w:"this.getDay()",z:"Ext.Date.getDayOfYear(this)",W:"Ext.String.leftPad(Ext.Date.getWeekOfYear(this), 2, '0')",F:"Ext.Date.monthNames[this.getMonth()]",m:"Ext.String.leftPad(this.getMonth() + 1, 2, '0')",M:"Ext.Date.getShortMonthName(this.getMonth())",n:"(this.getMonth() + 1)",t:"Ext.Date.getDaysInMonth(this)",L:"(Ext.Date.isLeapYear(this) ? 1 : 0)",o:"(this.getFullYear() + (Ext.Date.getWeekOfYear(this) == 1 && this.getMonth() > 0 ? +1 : (Ext.Date.getWeekOfYear(this) >= 52 && this.getMonth() < 11 ? -1 : 0)))",Y:"Ext.String.leftPad(this.getFullYear(), 4, '0')",y:"('' + this.getFullYear()).substring(2, 4)",a:"(this.getHours() < 12 ? 'am' : 'pm')",A:"(this.getHours() < 12 ? 'AM' : 'PM')",g:"((this.getHours() % 12) ? this.getHours() % 12 : 12)",G:"this.getHours()",h:"Ext.String.leftPad((this.getHours() % 12) ? this.getHours() % 12 : 12, 2, '0')",H:"Ext.String.leftPad(this.getHours(), 2, '0')",i:"Ext.String.leftPad(this.getMinutes(), 2, '0')",s:"Ext.String.leftPad(this.getSeconds(), 2, '0')",u:"Ext.String.leftPad(this.getMilliseconds(), 3, '0')",O:"Ext.Date.getGMTOffset(this)",P:"Ext.Date.getGMTOffset(this, true)",T:"Ext.Date.getTimezone(this)",Z:"(this.getTimezoneOffset() * -60)",c:function(){for(var j="Y-m-dTH:i:sP",g=[],f=0,d=j.length;f<d;++f){var h=j.charAt(f);g.push(h=="T"?"'T'":a.getFormatCode(h))}return g.join(" + ")},U:"Math.round(this.getTime() / 1000)"},isValid:function(n,c,l,j,f,g,e){j=j||0;f=f||0;g=g||0;e=e||0;var k=a.add(new Date(n<100?100:n,c-1,l,j,f,g,e),a.YEAR,n<100?n-100:0);return n==k.getFullYear()&&c==k.getMonth()+1&&l==k.getDate()&&j==k.getHours()&&f==k.getMinutes()&&g==k.getSeconds()&&e==k.getMilliseconds()},parse:function(d,f,c){var e=a.parseFunctions;if(e[f]==null){a.createParser(f)}return e[f](d,Ext.isDefined(c)?c:a.useStrict)},parseDate:function(d,e,c){return a.parse(d,e,c)},getFormatCode:function(d){var c=a.formatCodes[d];if(c){c=typeof c=="function"?c():c;a.formatCodes[d]=c}return c||("'"+Ext.String.escape(d)+"'")},createFormat:function(g){var f=[],c=false,e="";for(var d=0;d<g.length;++d){e=g.charAt(d);if(!c&&e=="\\"){c=true}else{if(c){c=false;f.push("'"+Ext.String.escape(e)+"'")}else{f.push(a.getFormatCode(e))}}}a.formatFunctions[g]=Ext.functionFactory("return "+f.join("+"))},createParser:(function(){var c=["var dt, y, m, d, h, i, s, ms, o, z, zz, u, v,","def = Ext.Date.defaults,","results = String(input).match(Ext.Date.parseRegexes[{0}]);","if(results){","{1}","if(u != null){","v = new Date(u * 1000);","}else{","dt = Ext.Date.clearTime(new Date);","y = Ext.Number.from(y, Ext.Number.from(def.y, dt.getFullYear()));","m = Ext.Number.from(m, Ext.Number.from(def.m - 1, dt.getMonth()));","d = Ext.Number.from(d, Ext.Number.from(def.d, dt.getDate()));","h  = Ext.Number.from(h, Ext.Number.from(def.h, dt.getHours()));","i  = Ext.Number.from(i, Ext.Number.from(def.i, dt.getMinutes()));","s  = Ext.Number.from(s, Ext.Number.from(def.s, dt.getSeconds()));","ms = Ext.Number.from(ms, Ext.Number.from(def.ms, dt.getMilliseconds()));","if(z >= 0 && y >= 0){","v = Ext.Date.add(new Date(y < 100 ? 100 : y, 0, 1, h, i, s, ms), Ext.Date.YEAR, y < 100 ? y - 100 : 0);","v = !strict? v : (strict === true && (z <= 364 || (Ext.Date.isLeapYear(v) && z <= 365))? Ext.Date.add(v, Ext.Date.DAY, z) : null);","}else if(strict === true && !Ext.Date.isValid(y, m + 1, d, h, i, s, ms)){","v = null;","}else{","v = Ext.Date.add(new Date(y < 100 ? 100 : y, m, d, h, i, s, ms), Ext.Date.YEAR, y < 100 ? y - 100 : 0);","}","}","}","if(v){","if(zz != null){","v = Ext.Date.add(v, Ext.Date.SECOND, -v.getTimezoneOffset() * 60 - zz);","}else if(o){","v = Ext.Date.add(v, Ext.Date.MINUTE, -v.getTimezoneOffset() + (sn == '+'? -1 : 1) * (hr * 60 + mn));","}","}","return v;"].join("\n");return function(n){var e=a.parseRegexes.length,p=1,f=[],m=[],k=false,d="",h=0,j=n.length,l=[],g;for(;h<j;++h){d=n.charAt(h);if(!k&&d=="\\"){k=true}else{if(k){k=false;m.push(Ext.String.escape(d))}else{g=a.formatCodeToRegex(d,p);p+=g.g;m.push(g.s);if(g.g&&g.c){if(g.calcAtEnd){l.push(g.c)}else{f.push(g.c)}}}}}f=f.concat(l);a.parseRegexes[e]=new RegExp("^"+m.join("")+"$","i");a.parseFunctions[n]=Ext.functionFactory("input","strict",b(c,e,f.join("")))}})(),parseCodes:{d:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(3[0-1]|[1-2][0-9]|0[1-9])"},j:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(3[0-1]|[1-2][0-9]|[1-9])"},D:function(){for(var c=[],d=0;d<7;c.push(a.getShortDayName(d)),++d){}return{g:0,c:null,s:"(?:"+c.join("|")+")"}},l:function(){return{g:0,c:null,s:"(?:"+a.dayNames.join("|")+")"}},N:{g:0,c:null,s:"[1-7]"},S:{g:0,c:null,s:"(?:st|nd|rd|th)"},w:{g:0,c:null,s:"[0-6]"},z:{g:1,c:"z = parseInt(results[{0}], 10);\n",s:"(\\d{1,3})"},W:{g:0,c:null,s:"(?:\\d{2})"},F:function(){return{g:1,c:"m = parseInt(Ext.Date.getMonthNumber(results[{0}]), 10);\n",s:"("+a.monthNames.join("|")+")"}},M:function(){for(var c=[],d=0;d<12;c.push(a.getShortMonthName(d)),++d){}return Ext.applyIf({s:"("+c.join("|")+")"},a.formatCodeToRegex("F"))},m:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(1[0-2]|0[1-9])"},n:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(1[0-2]|[1-9])"},t:{g:0,c:null,s:"(?:\\d{2})"},L:{g:0,c:null,s:"(?:1|0)"},o:function(){return a.formatCodeToRegex("Y")},Y:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},y:{g:1,c:"var ty = parseInt(results[{0}], 10);\ny = ty > Ext.Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"},a:{g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(am|pm|AM|PM)",calcAtEnd:true},A:{g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(AM|PM|am|pm)",calcAtEnd:true},g:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(1[0-2]|[0-9])"},G:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(2[0-3]|1[0-9]|[0-9])"},h:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(1[0-2]|0[1-9])"},H:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(2[0-3]|[0-1][0-9])"},i:{g:1,c:"i = parseInt(results[{0}], 10);\n",s:"([0-5][0-9])"},s:{g:1,c:"s = parseInt(results[{0}], 10);\n",s:"([0-5][0-9])"},u:{g:1,c:"ms = results[{0}]; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n",s:"(\\d+)"},O:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(3,5) / 60),","mn = o.substring(3,5) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{4})"},P:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(4,6) / 60),","mn = o.substring(4,6) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{2}:\\d{2})"},T:{g:0,c:null,s:"[A-Z]{1,4}"},Z:{g:1,c:"zz = results[{0}] * 1;\nzz = (-43200 <= zz && zz <= 50400)? zz : null;\n",s:"([+-]?\\d{1,5})"},c:function(){var e=[],c=[a.formatCodeToRegex("Y",1),a.formatCodeToRegex("m",2),a.formatCodeToRegex("d",3),a.formatCodeToRegex("H",4),a.formatCodeToRegex("i",5),a.formatCodeToRegex("s",6),{c:"ms = results[7] || '0'; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n"},{c:["if(results[8]) {","if(results[8] == 'Z'){","zz = 0;","}else if (results[8].indexOf(':') > -1){",a.formatCodeToRegex("P",8).c,"}else{",a.formatCodeToRegex("O",8).c,"}","}"].join("\n")}];for(var f=0,d=c.length;f<d;++f){e.push(c[f].c)}return{g:1,c:e.join(""),s:[c[0].s,"(?:","-",c[1].s,"(?:","-",c[2].s,"(?:","(?:T| )?",c[3].s,":",c[4].s,"(?::",c[5].s,")?","(?:(?:\\.|,)(\\d+))?","(Z|(?:[-+]\\d{2}(?::)?\\d{2}))?",")?",")?",")?"].join("")}},U:{g:1,c:"u = parseInt(results[{0}], 10);\n",s:"(-?\\d+)"}},dateFormat:function(c,d){return a.format(c,d)},isEqual:function(d,c){if(d&&c){return(d.getTime()===c.getTime())}return !(d||c)},format:function(d,e){if(a.formatFunctions[e]==null){a.createFormat(e)}var c=a.formatFunctions[e].call(d);return c+""},getTimezone:function(c){return c.toString().replace(/^.* (?:\((.*)\)|([A-Z]{1,4})(?:[\-+][0-9]{4})?(?: -?\d+)?)$/,"$1$2").replace(/[^A-Z]/g,"")},getGMTOffset:function(c,d){var e=c.getTimezoneOffset();return(e>0?"-":"+")+NS.String.leftPad(Math.floor(Math.abs(e)/60),2,"0")+(d?":":"")+NS.String.leftPad(Math.abs(e%60),2,"0")},getDayOfYear:function(f){var e=0,h=Ext.Date.clone(f),c=f.getMonth(),g;for(g=0,h.setDate(1),h.setMonth(0);g<c;h.setMonth(++g)){e+=a.getDaysInMonth(h)}return e+f.getDate()-1},getWeekOfYear:(function(){var c=86400000,d=7*c;return function(f){var g=Date.UTC(f.getFullYear(),f.getMonth(),f.getDate()+3)/c,e=Math.floor(g/7),h=new Date(e*d).getUTCFullYear();return e-Math.floor(Date.UTC(h,0,7)/d)+1}})(),isLeapYear:function(c){var d=c.getFullYear();return !!((d&3)==0&&(d%100||(d%400==0&&d)))},getFirstDayOfMonth:function(d){var c=(d.getDay()-(d.getDate()-1))%7;return(c<0)?(c+7):c},getLastDayOfMonth:function(c){return a.getLastDateOfMonth(c).getDay()},getFirstDateOfMonth:function(c){return new Date(c.getFullYear(),c.getMonth(),1)},getLastDateOfMonth:function(c){return new Date(c.getFullYear(),c.getMonth(),a.getDaysInMonth(c))},getDaysInMonth:(function(){var c=[31,28,31,30,31,30,31,31,30,31,30,31];return function(e){var d=e.getMonth();return d==1&&a.isLeapYear(e)?29:c[d]}})(),getSuffix:function(c){switch(c.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},clone:function(c){return new Date(c.getTime())},isDST:function(c){return new Date(c.getFullYear(),0,1).getTimezoneOffset()!=c.getTimezoneOffset()},clearTime:function(e,i){if(i){return NS.Date.clearTime(NS.Date.clone(e))}var g=e.getDate();e.setHours(0);e.setMinutes(0);e.setSeconds(0);e.setMilliseconds(0);if(e.getDate()!=g){for(var f=1,h=a.add(e,NS.Date.HOUR,f);h.getDate()!=g;f++,h=a.add(e,NS.Date.HOUR,f)){}e.setDate(g);e.setHours(h.getHours())}return e},add:function(g,f,h){var i=NS.Date.clone(g),c=NS.Date;if(!f||h===0){return i}switch(f.toLowerCase()){case NS.Date.MILLI:i.setMilliseconds(i.getMilliseconds()+h);break;case NS.Date.SECOND:i.setSeconds(i.getSeconds()+h);break;case NS.Date.MINUTE:i.setMinutes(i.getMinutes()+h);break;case NS.Date.HOUR:i.setHours(i.getHours()+h);break;case NS.Date.DAY:i.setDate(i.getDate()+h);break;case NS.Date.MONTH:var e=g.getDate();if(e>28){e=Math.min(e,Ext.Date.getLastDateOfMonth(Ext.Date.add(Ext.Date.getFirstDateOfMonth(g),"mo",h)).getDate())}i.setDate(e);i.setMonth(g.getMonth()+h);break;case NS.Date.YEAR:i.setFullYear(g.getFullYear()+h);break}return i},between:function(d,f,c){var e=d.getTime();return f.getTime()<=e&&e<=c.getTime()},compat:function(){var f=window.Date,e,c,g=["useStrict","formatCodeToRegex","parseFunctions","parseRegexes","formatFunctions","y2kYear","MILLI","SECOND","MINUTE","HOUR","DAY","MONTH","YEAR","defaults","dayNames","monthNames","monthNumbers","getShortMonthName","getShortDayName","getMonthNumber","formatCodes","isValid","parseDate","getFormatCode","createFormat","createParser","parseCodes"],d=["dateFormat","format","getTimezone","getGMTOffset","getDayOfYear","getWeekOfYear","isLeapYear","getFirstDayOfMonth","getLastDayOfMonth","getDaysInMonth","getSuffix","clone","isDST","clearTime","add","between"];NS.Array.forEach(g,function(h){f[h]=a[h]});NS.Array.forEach(d,function(h){f.prototype[h]=function(){var i=Array.prototype.slice.call(arguments);i.unshift(this);return a[h].apply(a,i)}})}};var a=NS.Date})();NS.DomHelper={emptyTags:/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i,confRe:/tag|children|cn|html|tpl|tplData$/i,endRe:/end/i,insertHtml:function(f,a,g){var e={},c,i,h,j,d,b;f=f.toLowerCase();e.beforebegin=["BeforeBegin","previousSibling"];e.afterend=["AfterEnd","nextSibling"];h=a.ownerDocument.createRange();i="setStart"+(this.endRe.test(f)?"After":"Before");if(e[f]){h[i](a);j=h.createContextualFragment(g);a.parentNode.insertBefore(j,f=="beforebegin"?a:a.nextSibling);return a[(f=="beforebegin"?"previous":"next")+"Sibling"]}else{d=(f=="afterbegin"?"first":"last")+"Child";if(a.firstChild){h[i](a[d]);j=h.createContextualFragment(g);if(f=="afterbegin"){a.insertBefore(j,a.firstChild)}else{a.appendChild(j)}}else{a.innerHTML=g}return a[d]}throw'Illegal insertion point -> "'+f+'"'},};NS.String=(function(){var i=/^[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+|[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+$/g,n=/('|\\)/g,g=/\{(\d+)\}/g,b=/([-.*+?^${}()|[\]\/\\])/g,r=/^\s+|\s+$/g,j=/\s+/,l=/(^[^a-z]*|[^\w])/gi,d={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;"},a={"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"'},p=[],m,f,c,e=function(t,s){return d[s]},h=function(s){return(!s)?s:String(s).replace(f,e)},k=function(t,s){return(s in a)?a[s]:String.fromCharCode(parseInt(s.substr(2),10))},q=function(s){return(!s)?s:String(s).replace(c,k)};for(m in d){p.push(m)}f=new RegExp("("+p.join("|")+")","g");p=[];for(m in a){p.push(m)}c=new RegExp("("+p.join("|")+"|&#[0-9]{1,5};)","g");return{createVarName:function(t){return t.replace(l,"")},htmlEncode:h,htmlDecode:q,urlAppend:function(t,s){if(!Ext.isEmpty(s)){return t+(t.indexOf("?")===-1?"?":"&")+s}return t},trim:function(s){return s.replace(i,"")},capitalize:function(s){return s.charAt(0).toUpperCase()+s.substr(1)},uncapitalize:function(s){return s.charAt(0).toLowerCase()+s.substr(1)},ellipsis:function(u,s,v){if(u&&u.length>s){if(v){var w=u.substr(0,s-2),t=Math.max(w.lastIndexOf(" "),w.lastIndexOf("."),w.lastIndexOf("!"),w.lastIndexOf("?"));if(t!==-1&&t>=(s-15)){return w.substr(0,t)+"..."}}return u.substr(0,s-3)+"..."}return u},escapeRegex:function(s){return s.replace(b,"\\$1")},escape:function(s){return s.replace(n,"\\$1")},toggle:function(t,u,s){return t===u?s:u},leftPad:function(t,u,v){var s=String(t);v=v||" ";while(s.length<u){s=v+s}return s},format:function(t){var s=NS.Array.toArray(arguments,1);return t.replace(g,function(u,v){return s[v]})},repeat:function(w,v,t){for(var s=[],u=v;u--;){s.push(w)}return s.join(t||"")},splitWords:function(s){if(s&&typeof s=="string"){return s.replace(r,"").split(j)}return s||[]}}})();NS.htmlEncode=NS.String.htmlEncode;NS.htmlDecode=NS.String.htmlDecode;NS.urlAppend=NS.String.urlAppend;(function(){NS.util={};NS.util.Format={};var f=NS.util.Format,e=/<\/?[^>]+>/gi,c=/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,b=/\r?\n/g,d=/[^\d\.]/g,a;NS.apply(f,{thousandSeparator:",",decimalSeparator:".",currencyPrecision:2,currencySign:"$",currencyAtEnd:false,undef:function(g){return g!==undefined?g:""},defaultValue:function(h,g){return h!==undefined&&h!==""?h:g},substr:function(h,i,g){return String(h).substr(i,g)},lowercase:function(g){return String(g).toLowerCase()},uppercase:function(g){return String(g).toUpperCase()},usMoney:function(g){return f.currency(g,"$",2)},currency:function(j,l,h,g){var n="",m=",0",k=0;j=j-0;if(j<0){j=-j;n="-"}h=NS.isDefined(h)?h:f.currencyPrecision;m+=m+(h>0?".":"");for(;k<h;k++){m+="0"}j=f.number(j,m);if((g||f.currencyAtEnd)===true){return NS.String.format("{0}{1}{2}",n,j,l||f.currencySign)}else{return NS.String.format("{0}{1}{2}",n,l||f.currencySign,j)}},date:function(g,h){if(!g){return""}if(!NS.isDate(g)){g=new Date(Date.parse(g))}return NS.Date.dateFormat(g,h||NS.Date.defaultFormat)},dateRenderer:function(g){return function(h){return f.date(h,g)}},stripTags:function(g){return !g?g:String(g).replace(e,"")},stripScripts:function(g){return !g?g:String(g).replace(c,"")},fileSize:function(g){if(g<1024){return g+" bytes"}else{if(g<1048576){return(Math.round(((g*10)/1024))/10)+" KB"}else{return(Math.round(((g*10)/1048576))/10)+" MB"}}},math:function(){var g={};return function(i,h){if(!g[h]){g[h]=NS.functionFactory("v","return v "+h+";")}return g[h](i)}}(),round:function(i,h){var g=Number(i);if(typeof h=="number"){h=Math.pow(10,h);g=Math.round(i*h)/h}return g},number:function(y,s){if(!s){return y}y=NS.Number.from(y,NaN);if(isNaN(y)){return""}var A=f.thousandSeparator,q=f.decimalSeparator,z=false,r=y<0,h,g;y=Math.abs(y);if(s.substr(s.length-2)=="/i"){if(!a){a=new RegExp("[^\\d\\"+f.decimalSeparator+"]","g")}s=s.substr(0,s.length-2);z=true;h=s.indexOf(A)!=-1;g=s.replace(a,"").split(q)}else{h=s.indexOf(",")!=-1;g=s.replace(d,"").split(".")}if(1<g.length){y=NS.Number.toFixed(y,g[1].length)}else{if(2<g.length){}else{y=NS.Number.toFixed(y,0)}}var x=y.toString();g=x.split(".");if(h){var w=g[0],p=[],t=w.length,l=Math.floor(t/3),k=w.length%3||3,u;for(u=0;u<t;u+=k){if(u!==0){k=3}p[p.length]=w.substr(u,k);l-=1}x=p.join(A);if(g[1]){x+=q+g[1]}}else{if(g[1]){x=g[0]+q+g[1]}}if(r){r=x.replace(/[^1-9]/g,"")!==""}return(r?"-":"")+s.replace(/[\d,?\.?]+/,x)},numberRenderer:function(g){return function(h){return f.number(h,g)}},plural:function(g,h,i){return g+" "+(g==1?h:(i?i:h+"s"))},nl2br:function(g){return NS.isEmpty(g)?"":g.replace(b,"<br/>")},capitalize:NS.String.capitalize,ellipsis:NS.String.ellipsis,format:NS.String.format,htmlDecode:NS.String.htmlDecode,htmlEncode:NS.String.htmlEncode,leftPad:NS.String.leftPad,trim:NS.String.trim,parseBox:function(h){if(NS.isNumber(h)){h=h.toString()}var i=h.split(" "),g=i.length;if(g==1){i[1]=i[2]=i[3]=i[0]}else{if(g==2){i[2]=i[0];i[3]=i[1]}else{if(g==3){i[3]=i[1]}}}return{top:parseInt(i[0],10)||0,right:parseInt(i[1],10)||0,bottom:parseInt(i[2],10)||0,left:parseInt(i[3],10)||0}},escapeRegex:function(g){return g.replace(/([\-.*+?\^${}()|\[\]\/\\])/g,"\\$1")}})})();NS.JSON=new (function(){var me=this,encodingFunction,decodingFunction,useNative=null,useHasOwn=!!{}.hasOwnProperty,isNative=function(){if(useNative===null){useNative=NS.USE_NATIVE_JSON&&window.JSON&&JSON.toString()=="[object JSON]"}return useNative},pad=function(n){return n<10?"0"+n:n},doDecode=function(json){return eval("("+json+")")},doEncode=function(o,newline){if(o===null||o===undefined){return"null"}else{if(NS.isDate(o)){return NS.JSON.encodeDate(o)}else{if(NS.isString(o)){return encodeString(o)}else{if(o.toJSON){return o.toJSON()}else{if(NS.isArray(o)){return encodeArray(o,newline)}else{if(typeof o=="number"){return isFinite(o)?String(o):"null"}else{if(NS.isBoolean(o)){return String(o)}else{if(NS.isObject(o)){return encodeObject(o,newline)}else{if(typeof o==="function"){return"null"}}}}}}}}}return"undefined"},m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\","\x0b":"\\u000b"},charToReplace=/[\\\"\x00-\x1f\x7f-\uffff]/g,encodeString=function(s){return'"'+s.replace(charToReplace,function(a){var c=m[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"'},encodeArrayPretty=function(o,newline){var len=o.length,cnewline=newline+"   ",sep=","+cnewline,a=["[",cnewline],i;for(i=0;i<len;i+=1){a.push(doEncode(o[i],cnewline),sep)}a[a.length-1]=newline+"]";return a.join("")},encodeObjectPretty=function(o,newline){var cnewline=newline+"   ",sep=","+cnewline,a=["{",cnewline],i;for(i in o){if(!useHasOwn||o.hasOwnProperty(i)){a.push(doEncode(i)+": "+doEncode(o[i],cnewline),sep)}}a[a.length-1]=newline+"}";return a.join("")},encodeArray=function(o,newline){if(newline){return encodeArrayPretty(o,newline)}var a=["[",""],len=o.length,i;for(i=0;i<len;i+=1){a.push(doEncode(o[i]),",")}a[a.length-1]="]";return a.join("")},encodeObject=function(o,newline){if(newline){return encodeObjectPretty(o,newline)}var a=["{",""],i;for(i in o){if(!useHasOwn||o.hasOwnProperty(i)){a.push(doEncode(i),":",doEncode(o[i]),",")}}a[a.length-1]="}";return a.join("")};me.encodeValue=doEncode;me.encodeDate=function(o){return'"'+o.getFullYear()+"-"+pad(o.getMonth()+1)+"-"+pad(o.getDate())+"T"+pad(o.getHours())+":"+pad(o.getMinutes())+":"+pad(o.getSeconds())+'"'};me.encode=function(o){if(!encodingFunction){encodingFunction=isNative()?JSON.stringify:me.encodeValue}return encodingFunction(o)};me.decode=function(json,safe){if(!decodingFunction){decodingFunction=isNative()?JSON.parse:doDecode}try{return decodingFunction(json)}catch(e){if(safe===true){return null}NS.error({sourceClass:"NS.JSON",sourceMethod:"decode",msg:"你在解析一个非法的JSON格式: "+json})}}})();NS.encode=NS.JSON.encode;NS.decode=NS.JSON.decode;NS.Number=new function(){var b=this,c=(0.9).toFixed()!=="1",a=Math;NS.apply(this,{constrain:function(f,e,d){f=parseFloat(f);if(!isNaN(e)){f=a.max(f,e)}if(!isNaN(d)){f=a.min(f,d)}return f},snap:function(g,e,f,h){var d;if(g===undefined||g<f){return f||0}if(e){d=g%e;if(d!==0){g-=d;if(d*2>=e){g+=e}else{if(d*2<-e){g-=e}}}}return b.constrain(g,f,h)},snapInRange:function(g,d,f,h){var e;f=(f||0);if(g===undefined||g<f){return f}if(d&&(e=((g-f)%d))){g-=e;e*=2;if(e>=d){g+=d}else{if(e<-d){g-=d}}}if(h!==undefined){if(g>(h=b.snapInRange(h,d,f))){g=h}}return g},toFixed:function(f,d){if(c){d=d||0;var e=a.pow(10,d);return(a.round(f*e)/e).toFixed(d)}return f.toFixed(d)},from:function(e,d){if(isFinite(e)){e=parseFloat(e)}return !isNaN(e)?e:d},randomInt:function(e,d){return a.floor(a.random()*(d-e+1)+e)}});NS.num=function(){return b.from.apply(this,arguments)}};NS.define("NS.XTemplateCompiler",{useEval:false,doTpl:NS.emptyFn,parse:function(n){var p=this,l=n.length,c={elseif:"elif"},j=p.topRe,b=p.actionsRe,k,q,u,f,r,g,a,e,d,h,i;p.level=0;p.stack=q=[];for(k=0;k<l;k=h){j.lastIndex=k;f=j.exec(n);if(!f){p.doText(n.substring(k,l));break}d=f.index;h=j.lastIndex;if(k<d){p.doText(n.substring(k,d))}if(f[1]){h=n.indexOf("%}",d+2);p.doEval(n.substring(d+2,h));h+=2}else{if(f[2]){h=n.indexOf("]}",d+2);p.doExpr(n.substring(d+2,h));h+=2}else{if(f[3]){p.doTag(f[3])}else{if(f[4]){i=null;while((e=b.exec(f[4]))!==null){u=e[2]||e[3];if(u){u=NS.String.htmlDecode(u);r=e[1];r=c[r]||r;i=i||{};g=i[r];if(typeof g=="string"){i[r]=[g,u]}else{if(g){i[r].push(u)}else{i[r]=u}}}}if(!i){if(p.elseRe.test(f[4])){p.doElse()}else{if(p.defaultRe.test(f[4])){p.doDefault()}else{p.doTpl();q.push({type:"tpl"})}}}else{if(i["if"]){p.doIf(i["if"],i);q.push({type:"if"})}else{if(i["switch"]){p.doSwitch(i["switch"],i);q.push({type:"switch"})}else{if(i["case"]){p.doCase(i["case"],i)}else{if(i.elif){p.doElseIf(i.elif,i)}else{if(i["for"]){++p.level;p.doFor(i["for"],i);q.push({type:"for",actions:i})}else{if(i.exec){p.doExec(i.exec,i);q.push({type:"exec",actions:i})}}}}}}}}else{a=q.pop();p.doEnd(a.type,a.actions);if(a.type=="for"){--p.level}}}}}}},topRe:/(?:(\{\%)|(\{\[)|\{([^{}]*)\})|(?:<tpl([^>]*)\>)|(?:<\/tpl>)/g,actionsRe:/\s*(elif|elseif|if|for|exec|switch|case|eval)\s*\=\s*(?:(?:["]([^"]*)["])|(?:[']([^']*)[']))\s*/g,defaultRe:/^\s*default\s*$/,elseRe:/^\s*else\s*$/,useFormat:true,propNameRe:/^[\w\d\$]*$/,compile:function(a){var c=this,b=c.generate(a);return c.useEval?c.evalTpl(b):(new Function("NS",b))(NS)},generate:function(a){var c=this;c.body=["var c0=values, p0=parent, n0=xcount, i0=xindex;\n"];c.funcs=["var fm=NS.util.Format;"];c.switches=[];c.parse(a);c.funcs.push((c.useEval?"$=":"return")+" function ("+c.fnArgs+") {",c.body.join(""),"}");var b=c.funcs.join("\n");return b},doText:function(a){a=a.replace(this.aposRe,"\\'");a=a.replace(this.newLineRe,"\\n");this.body.push("out.push('",a,"')\n")},doExpr:function(a){this.body.push("out.push(String(",a,"))\n")},doTag:function(a){this.doExpr(this.parseTag(a))},doElse:function(){this.body.push("} else {\n")},doEval:function(a){this.body.push(a,"\n")},doIf:function(b,c){var a=this;if(a.propNameRe.test(b)){a.body.push("if (",a.parseTag(b),") {\n")}else{a.body.push("if (",a.addFn(b),a.callFn,") {\n")}if(c.exec){a.doExec(c.exec)}},doElseIf:function(b,c){var a=this;if(a.propNameRe.test(b)){a.body.push("} else if (",a.parseTag(b),") {\n")}else{a.body.push("} else if (",a.addFn(b),a.callFn,") {\n")}if(c.exec){a.doExec(c.exec)}},doSwitch:function(b){var a=this;if(a.propNameRe.test(b)){a.body.push("switch (",a.parseTag(b),") {\n")}else{a.body.push("switch (",a.addFn(b),a.callFn,") {\n")}a.switches.push(0)},doCase:function(e){var d=this,c=NS.isArray(e)?e:[e],f=d.switches.length-1,a,b;if(d.switches[f]){d.body.push("break;\n")}else{d.switches[f]++}for(b=0,f=c.length;b<f;++b){a=d.intRe.exec(c[b]);c[b]=a?a[1]:("'"+c[b].replace(d.aposRe,"\\'")+"'")}d.body.push("case ",c.join(": case "),":\n")},doDefault:function(){var a=this,b=a.switches.length-1;if(a.switches[b]){a.body.push("break;\n")}else{a.switches[b]++}a.body.push("default:\n")},doEnd:function(b,d){var c=this,a=c.level-1;if(b=="for"){if(d.exec){c.doExec(d.exec)}c.body.push("}\n");c.body.push("parent=p",a,";values=r",a+1,";xcount=n",a,";xindex=i",a,"\n")}else{if(b=="if"||b=="switch"){c.body.push("}\n")}}},doFor:function(e,f){var d=this,c=d.addFn(e),b=d.level,a=b-1;d.body.push("var c",b,"=",c,d.callFn,", a",b,"=NS.isArray(c",b,"),p",b,"=(parent=c",a,"),r",b,"=values\n","for (var i",b,"=0,n",b,"=a",b,"?c",b,".length:(c",b,"?1:0), xcount=n",b,";i",b,"<n"+b+";++i",b,"){\n","values=a",b,"?c",b,"[i",b,"]:c",b,"\n","xindex=i",b,"+1\n")},doExec:function(c,d){var b=this,a="f"+b.funcs.length;b.funcs.push("function "+a+"("+b.fnArgs+") {"," try { with(values) {","  "+c," }} catch(e) {}","}");b.body.push(a+b.callFn+"\n")},addFn:function(a){var c=this,b="f"+c.funcs.length;if(a==="."){c.funcs.push("function "+b+"("+c.fnArgs+") {"," return values","}")}else{if(a===".."){c.funcs.push("function "+b+"("+c.fnArgs+") {"," return parent","}")}else{c.funcs.push("function "+b+"("+c.fnArgs+") {"," try { with(values) {","  return("+a+")"," }} catch(e) {}","}")}}return b},parseTag:function(b){var a=this.tagRe.exec(b),e=a[1],g=a[2],d=a[3],f=a[4],c;if(e=="."){c='NS.Array.indexOf(["string", "number", "boolean"], typeof values) > -1 || NS.isDate(values) ? values : ""'}else{if(e=="#"){c="xindex"}else{if(e.substr(0,7)=="parent."){c=e}else{if((e.indexOf(".")!==-1)&&(e.indexOf("-")===-1)){c="values."+e}else{c="values['"+e+"']"}}}}if(f){c="("+c+f+")"}if(g&&this.useFormat){d=d?","+d:"";if(g.substr(0,5)!="this."){g="fm."+g+"("}else{g+="("}}else{d="";g="("+c+" === undefined ? '' : "}return g+c+d+")"},evalTpl:function($){eval($);return $},newLineRe:/\r\n|\r|\n/g,aposRe:/[']/g,intRe:/^\s*(\d+)\s*$/,tagRe:/([\w-\.\#]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?(\s?[\+\-\*\/]\s?[\d\.\+\-\*\/\(\)]+)?/});(function(){var a=NS.XTemplateCompiler.prototype;a.fnArgs="out,values,parent,xindex,xcount";a.callFn=".call(this,"+a.fnArgs+")"})();NS.define("NS.Template",{constructor:function(d){var f=this,b=arguments,a=[],c=0,e=b.length,g;f.initialConfig={};if(e>1){for(;c<e;c++){g=b[c];if(typeof g=="object"){NS.apply(f.initialConfig,g);NS.apply(f,g)}else{a.push(g)}}d=a.join("")}else{if(NS.isArray(d)){a.push(d.join(""))}else{a.push(d)}}f.html=a.join("")},isTemplate:true,overwrite:function(b,a,c){b=NS.getDom(b);b.innerHTML=this.apply(a);return c?NS.get(b.firstChild,true):b.firstChild},apply:function(a){return this.applyOut(a,[]).join("")},applyOut:function(a,b){var d=this,c;if(!d.fn){c=new NS.XTemplateCompiler({useFormat:d.disableFormats!==true});d.fn=c.compile(d.html)}try{d.fn.call(d,b,a,{},1,1)}catch(f){}return b}});